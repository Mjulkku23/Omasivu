<!DOCTYPE html>
<html lang="fi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Liukko Olavi – Etusivu</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    :root {
      --bg:#0b1e3a; --bg-2:#10294e; --text:#e6ecff; --muted:#b7c2e5;
      --accent:#5aa8ff; --success:#2fd37d; --danger:#ff5a7a; --card-radius:1.25rem; --ring:0 0 0 .25rem rgba(90,168,255,.25);
    }
    /* --- alkuperäiset --- */
    html,body{background:var(--bg);color:var(--text)}
    a{color:var(--accent)} a:hover{color:#b8d7ff}
    .navbar{background:linear-gradient(180deg,rgba(10,25,50,.95),rgba(10,25,50,.75));backdrop-filter:blur(6px);border-bottom:1px solid rgba(255,255,255,.06)}
    .hero{background:radial-gradient(1200px 600px at 10% -10%, rgba(90,168,255,.25), transparent),radial-gradient(1000px 500px at 90% -20%, rgba(47,211,125,.15), transparent),var(--bg);padding:6rem 0 4rem}
    .card-dark{background:var(--bg-2);border:1px solid rgba(255,255,255,.08);border-radius:var(--card-radius)}
    .btn-accent{--bs-btn-color:#001935;--bs-btn-bg:var(--accent);--bs-btn-border-color:var(--accent);--bs-btn-hover-bg:#71b6ff;--bs-btn-hover-border-color:#71b6ff;--bs-btn-focus-shadow-rgb:90,168,255;box-shadow:var(--ring)}
    .avatar-placeholder{width:100%;aspect-ratio:1/1;border-radius:1rem;border:2px dashed rgba(255,255,255,.25);display:grid;place-items:center;color:var(--muted);background:repeating-linear-gradient(45deg, rgba(255,255,255,.04), rgba(255,255,255,.04) 12px, transparent 12px, transparent 24px), var(--bg-2);overflow:hidden}
    .section-title{font-weight:700;letter-spacing:.3px}
    table td,table th{color:var(--text);border-color:rgba(255,255,255,.08)!important}
    footer{border-top:1px solid rgba(255,255,255,.08);background:#0a1932}
    .answer-btn{border:1px solid rgba(255,255,255,.12)}
    .answer-btn.is-correct{background:rgba(47,211,125,.15);border-color:var(--success);color:#d9ffe9}
    .answer-btn.is-wrong{background:rgba(255,90,122,.15);border-color:var(--danger);color:#ffd9e1}
    .answer-btn:disabled{opacity:1}

    /* --- Tähtitaustan näkyvyyskorjaukset (ylikirjoitukset) --- */
    /* Tee perustaustasta läpinäkyvä, jotta canvas näkyy */
    html, body { background: transparent !important; }

    /* Hero: poista peittävä var(--bg) lopusta → vain läpikuultavat gradientit */
    .hero {
      background-image:
        radial-gradient(1200px 600px at 10% -10%, rgba(90,168,255,.25), transparent),
        radial-gradient(1000px 500px at 90% -20%, rgba(47,211,125,.15), transparent);
      background-color: transparent !important;
      padding: 6rem 0 4rem; /* säilytä mitat */
    }

    /* Canvas kerros + sisällön kerrostus */
    #bg-stars{
      position: fixed; inset: 0; z-index: 0;
      pointer-events: none; background: #0b1e3a; /* fallback, jos canvas tyhjä */
    }
    .navbar, .hero, section, footer { position: relative; z-index: 1; }
  </style>
</head>
<body>
  <!-- Taustan tähtikenttä-canvas -->
  <canvas id="bg-stars" aria-hidden="true"></canvas>

  <!-- Header / Navigaatio -->
  <nav class="navbar navbar-expand-lg sticky-top">
    <div class="container">
      <a class="navbar-brand fw-semibold text-light" href="#">Liukko Olavi</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#nav"><span class="navbar-toggler-icon"></span></button>
      <div class="collapse navbar-collapse" id="nav">
        <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
          <li class="nav-item"><a class="nav-link text-light" href="#minitieto">Minä</a></li>
          <li class="nav-item"><a class="nav-link text-light" href="#osaamiset">Osaamiset</a></li>
          <li class="nav-item"><a class="nav-link text-light" href="#koulutus">Koulutus</a></li>
          <li class="nav-item"><a class="nav-link text-light" href="#tietovisa">Tietovisa</a></li>
          <li class="nav-item"><a class="nav-link text-light" href="#yhteys">Yhteys</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Hero -->
  <header class="hero">
    <div class="container">
      <div class="row align-items-center g-4">
        <div class="col-12 col-lg-6">
          <h1 class="display-5 fw-bold mb-3">Hei! Olen <span class="text-decoration-underline">Liukko Olavi</span>.</h1>
          <p class="lead mb-4">Tämä on etusivuni. Rakennan parhaillaan portfoliota, jossa yhdistyy selkeys ja pieni ripaus meemiä — asiallisesti. Kuvapaikka lisätään myöhemmin.</p>
          <div class="d-flex gap-3">
            <a class="btn btn-accent btn-lg" href="#osaamiset">Tutustu osaamiseeni</a>
            <a class="btn btn-outline-light btn-lg" href="#koulutus">Katso koulutus</a>
          </div>
        </div>
        <div class="col-12 col-lg-6">
          <div class="avatar-placeholder overflow-hidden p-0">
            <!-- VAIHDA OMAAN KUVAASI PROJEKTIN SISÄLLÄ (suhteellinen polku) -->
            <img src="C:\Users\220112\Documents\Uusi kansio\Omasivu/OmakuvaKuvake.png" alt="Liukko Olavin omakuva" class="w-100 h-100" style="object-fit:cover;border-radius:1rem;">
          </div>
        </div>
      </div>
    </div>
  </header>

  <!-- Minä-tieto -->
  <section id="minitieto" class="py-5">
    <div class="container">
      <div class="row g-4">
        <div class="col-12 col-xl-8">
          <div class="card-dark p-4 h-100">
            <h2 class="section-title h3 mb-3">Pieni minä-tieto</h2>
            <ul class="mb-0">
              <li><strong>Nimi:</strong> Liukko Olavi</li>
              <li><strong>Esittely:</strong> (placeholder) Lyhyt esittelyteksti lisätään myöhemmin. Kiinnostuksen kohteet ja tavoitteet kiteytetään 2–3 lauseeseen.</li>
              <li><strong>Harjoittelukiinnostus:</strong> (placeholder) Esim. pelialan suunnittelu, skriptaus, sisällöntuotanto.</li>
            </ul>
          </div>
        </div>
        <div class="col-12 col-xl-4">
          <div class="card-dark p-4 h-100">
            <h3 class="h5 mb-3">Pikakontaktit</h3>
            <div class="d-grid gap-2">
              <a class="btn btn-outline-light" href="#yhteys">Ota yhteyttä</a>
              <a class="btn btn-outline-light" href="#tyonaytteet">Työnäytteet (tulossa)</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Osaamiset (taulukko) -->
  <section id="osaamiset" class="py-5">
    <div class="container">
      <h2 class="section-title h3 mb-4">Osaamiset (placeholder)</h2>
      <div class="table-responsive card-dark p-0 overflow-hidden">
        <table class="table table-dark table-striped mb-0 align-middle">
          <thead><tr><th scope="col">Taito</th><th scope="col">Taso</th></tr></thead>
          <tbody>
            <tr><td>Pelialan suunnittelija</td><td>Hyvä</td></tr>
            <tr><td>Käskikirjoittaja</td><td>Loistava</td></tr>
          </tbody>
        </table>
      </div>
    </div>
  </section>

  <!-- Koulutus -->
  <section id="koulutus" class="py-5">
    <div class="container">
      <h2 class="section-title h3 mb-3">Koulutus (placeholder)</h2>
      <div class="card-dark p-4">
        <ul class="mb-0">
          <li>Rakennusala/AsbestiPurkaja</li>
          <li>Unityn perustaidot</li>
          <li>UnrealEnginen perustaidot</li>
          <li>Xamk IVGC kurssi</li>
        </ul>
      </div>
    </div>
  </section>

  <!-- Tietovisa -->
  <section id="tietovisa" class="py-5">
    <div class="container">
      <h2 class="section-title h3 mb-3">Tietovisa: Pelinkehitys (10 kysymystä)</h2>
      <div class="card-dark p-4">
        <p class="mb-4">Vastaa kymmeneen monivalintakysymykseen. Oikea vastaus korostuu vihreällä, väärä punaisella. Lopuksi näet tuloksesi ja voit tallentaa sen nimimerkillä. Tulokset tallentuvat palvelimelle (CSV), ja jos palvelinta ei ole käytössä, laitteesi LocalStorageen.</p>
        <div id="quiz"></div>
        <hr class="my-4"/>
        <div class="row g-3 align-items-center">
          <div class="col-sm-6 col-md-4">
            <label for="nick" class="form-label">Nimimerkki</label>
            <input id="nick" type="text" class="form-control" placeholder="Esim. OlaviDev">
          </div>
          <div class="col-sm-6 col-md-auto">
            <button id="saveScore" class="btn btn-accent mt-3 mt-md-4" disabled>Tallenna tulos</button>
          </div>
          <div class="col-md"><div id="result" class="fw-semibold"></div></div>
        </div>
        <div class="mt-3"><button id="restart" class="btn btn-outline-light btn-sm d-none">Aloita alusta</button></div>
        <div class="mt-4"><h3 class="h6 text-muted">Tallennetut tulokset (palvelimelta jos mahdollista, muuten tältä laitteilta)</h3><ul id="savedScores" class="small mb-0"></ul></div>
      </div>
    </div>
  </section>

  <!-- Yhteys -->
  <section id="yhteys" class="py-5">
    <div class="container">
      <h2 class="section-title h3 mb-3">Yhteys</h2>
      <div class="card-dark p-4"><p class="mb-0">Lomake lisätään myöhemmin. Tähän tulee yhteydenottolomake (PHP), joka lähettää viestin ilman, että sähköpostiohjelma aukeaa.</p></div>
    </div>
  </section>

  <footer class="py-4">
    <div class="container d-flex flex-column flex-md-row justify-content-between align-items-center gap-2">
      <small class="text-muted">© <span id="year"></span> Liukko Olavi</small>
      <small class="text-muted">Placeholder-versio • Teema: tummansininen • Tietovisassa PHP-tallennus</small>
    </div>
  </footer>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Avaruustaustan animaatio (Canvas) -->
  <script>
  (() => {
    const canvas = document.getElementById('bg-stars');
    const ctx = canvas.getContext('2d', { alpha: true });

    let w, h, dpr, stars = [], raf;

    // Säädöt
    const BASE_DENSITY = 0.00016; // tähteä per px (laske, jos raskas)
    const SPEED = 0.01;           // syvyyssuunta
    const TWINKLE = 0.03;         // välke

    function resize(){
      dpr = Math.max(1, Math.min(2, window.devicePixelRatio || 1));
      w = canvas.width  = Math.floor(innerWidth * dpr);
      h = canvas.height = Math.floor(innerHeight * dpr);
      canvas.style.width  = innerWidth + 'px';
      canvas.style.height = innerHeight + 'px';

      const n = Math.floor(innerWidth * innerHeight * BASE_DENSITY);
      stars = Array.from({length:n}, () => ({
        x: Math.random() * w,
        y: Math.random() * h,
        z: Math.random(),                         // 0..1
        r: (0.6 + Math.random()*1.2) * dpr,       // koko
        hue: 200 + Math.random()*20,              // sinertävä
        a: 0.35 + Math.random()*0.55              // läpinäkyvyys
      }));
    }

    function step(){
      ctx.clearRect(0,0,w,h);

      for(const s of stars){
        s.z -= SPEED * (0.5 + s.z * 0.5);
        if(s.z <= 0.02){
          s.z = 1; s.x = Math.random()*w; s.y = Math.random()*h;
        }

        const scale = (1.2 - s.z) * 1.2;
        const r = s.r * scale;
        const alpha = Math.min(1, s.a * (1.3 - s.z) + (Math.random()-0.5)*TWINKLE);

        ctx.beginPath();
        ctx.arc(s.x, s.y, r, 0, Math.PI*2);
        ctx.fillStyle = `hsla(${s.hue},80%,${70 + (1 - s.z) * 25}%,${alpha})`;
        ctx.fill();
      }

      raf = requestAnimationFrame(step);
    }

    document.addEventListener('visibilitychange', () => {
      if(document.hidden) cancelAnimationFrame(raf);
      else raf = requestAnimationFrame(step);
    });

    window.addEventListener('resize', resize, { passive:true });

    resize();
    raf = requestAnimationFrame(step);
  })();
  </script>

  <!-- OMA JS (vuosi + tietovisa) -->
  <script>
    document.getElementById('year').textContent = new Date().getFullYear();

    // Tietovisa 10 kysymyksellä
    const quizData = [
      { q: "Mikä pelimoottori käyttää ensisijaisena skriptikielenään C#:", options:["Unreal Engine","Godot (GDScript)","Unity"], correct:"Unity" },
      { q: "Mikä on pelimoottorin 'game loopin' päätarkoitus?", options:["Tallentaa pelit automaattisesti pilveen","Päivittää pelimaailman tilaa ja piirtää kuvan jokaisella ruudulla","Generoida äänitehosteet reaaliajassa"], correct:"Päivittää pelimaailman tilaa ja piirtää kuvan jokaisella ruudulla" },
      { q: "Mitä Git on peliprojektissa?", options:["Pelihahmon tekoälyjärjestelmä","Versionhallintajärjestelmä muutosten seuraamiseen","Grafiikkakirjasto valaistuksen laskentaan"], correct:"Versionhallintajärjestelmä muutosten seuraamiseen" },
      { q: "Mitä FPS (frames per second) mittaa pelissä?", options:["Ruudunpäivitysten määrää sekunnissa","Verkon viivettä millisekunneissa","Pelaajan sijaintia kartalla"], correct:"Ruudunpäivitysten määrää sekunnissa" },
      { q: "Mitä 'delta time' (Δt) tarkoittaa peliohjelmoinnissa?", options:["Aikaväli edellisen ja nykyisen ruudun välillä","Pelin kokonaiskesto sekunteina","Objektin massa fysiikkamoottorissa"], correct:"Aikaväli edellisen ja nykyisen ruudun välillä" },
      { q: "Mikä on Prefab Unityssa?", options:["Uudelleenkäytettävä esiaseteltu objektipohja","Valaistuksen sävyä säätävä shader","Aikajana-animaation nimi"], correct:"Uudelleenkäytettävä esiaseteltu objektipohja" },
      { q: "Mitä Blueprintit ovat Unreal Enginessä?", options:["Visuaalinen skriptausjärjestelmä","Tekstuurien pakkausmuoto","Fysiikan laskennan optimointitapa"], correct:"Visuaalinen skriptausjärjestelmä" },
      { q: "Mikä on sprite peligrafiikassa?", options:["2D-kuva/tekstuurigrafiikka, jota piirretään ruudulle","3D-verkko (mesh), jossa on verteksit ja kolmiot","Ääniefekti, joka toistetaan tapahtumasta"], correct:"2D-kuva/tekstuurigrafiikka, jota piirretään ruudulle" },
      { q: "Mitä varten käytetään collideria/törmäyskomponenttia?", options:["Havaita ja käsitellä törmäyksiä tai päällekkäisyyksiä","Renderöidä varjot dynaamisesti","Synkronoida objektit moninpelissä"], correct:"Havaita ja käsitellä törmäyksiä tai päällekkäisyyksiä" },
      { q: "Mihin tekstuuri-atlaksen (texture atlas) käyttö auttaa?", options:["Vähentää piirto-/materiaalikutsuja yhdistämällä tekstuureja","Parantaa äänenlaatua ilman pakkausta","Lisää polygonien määrää realistisuutta varten"], correct:"Vähentää piirto-/materiaalikutsuja yhdistämällä tekstuureja" }
    ];

    const quizRoot = document.getElementById('quiz');
    const resultEl = document.getElementById('result');
    const saveBtn = document.getElementById('saveScore');
    const restartBtn = document.getElementById('restart');
    const savedList = document.getElementById('savedScores');
    const TOTAL = quizData.length; // 10

    let score = 0, answered = 0;
    const shuffle = arr => arr.map(v=>({v,r:Math.random()})).sort((a,b)=>a.r-b.r).map(({v})=>v);

    function renderQuiz(){
      score = 0; answered = 0; resultEl.textContent = ''; saveBtn.disabled = true; restartBtn.classList.add('d-none'); quizRoot.innerHTML = '';
      const questions = shuffle(quizData.slice());
      questions.forEach((item, idx)=>{
        const card = document.createElement('div'); card.className = 'mb-3 p-3 card-dark';
        const h = document.createElement('h3'); h.className = 'h6 mb-3'; h.textContent = `${idx+1}/${TOTAL}: ${item.q}`; card.appendChild(h);
        const options = shuffle(item.options.slice());
        options.forEach(opt=>{
          const btn = document.createElement('button'); btn.type='button'; btn.className='btn btn-outline-light answer-btn me-2 mb-2'; btn.textContent = opt;
          btn.addEventListener('click', ()=>{
            [...card.querySelectorAll('button')].forEach(b=>b.disabled=true);
            if(opt===item.correct){ btn.classList.remove('btn-outline-light'); btn.classList.add('is-correct'); score++; }
            else { btn.classList.remove('btn-outline-light'); btn.classList.add('is-wrong'); const c=[...card.querySelectorAll('button')].find(b=>b.textContent===item.correct); if(c){ c.classList.remove('btn-outline-light'); c.classList.add('is-correct'); } }
            answered++; if(answered===TOTAL){ showResult(); }
          });
          card.appendChild(btn);
        });
        quizRoot.appendChild(card);
      });
    }

    function showResult(){
      let msg = 'Kannattaa jatkaa lukemista';
      if(score>=9) msg = 'Olet tietäjä';
      else if(score>=6) msg = 'Voit vielä vähän kertailla tietoja';
      resultEl.textContent = `Tuloksesi: ${score}/${TOTAL} — ${msg}`;
      saveBtn.disabled = false; restartBtn.classList.remove('d-none');
    }

    saveBtn?.addEventListener('click', async ()=>{
      const nick = (document.getElementById('nick').value.trim()||'Anonyymi');
      const entry = {nick, score, total: TOTAL, ts: new Date().toISOString()};
      let ok=false;
      try{
        const resp = await fetch('actions/save_score.php',{method:'POST',headers:{'Content-Type':'application/x-www-form-urlencoded'},body:new URLSearchParams({nick:entry.nick,score:String(entry.score),total:String(entry.total)})});
        const data = await resp.json(); ok = !!data?.success;
      }catch(e){ ok=false; }
      if(!ok){ const key='olavi_quiz_scores'; const prev=JSON.parse(localStorage.getItem(key)||'[]'); prev.push(entry); localStorage.setItem(key, JSON.stringify(prev)); }
      await renderSaved(); saveBtn.disabled = true;
    });

    restartBtn?.addEventListener('click', renderQuiz);

    async function renderSaved(){
      savedList.innerHTML = '';
      let items = null;
      try{ const resp = await fetch('actions/get_scores.php'); if(resp.ok){ items = await resp.json(); } }catch(e){}
      if(!Array.isArray(items) || items.length===0){ const key='olavi_quiz_scores'; items = JSON.parse(localStorage.getItem(key)||'[]'); }
      items.slice().reverse().forEach(i=>{ const li=document.createElement('li'); const d=new Date(i.ts||Date.now()); li.textContent=`${d.toLocaleDateString()} ${d.toLocaleTimeString()} — ${i.nick}: ${i.score}/${i.total}`; savedList.appendChild(li); });
    }

    renderQuiz(); renderSaved();
  </script>
</body>
</html>
